(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{6571:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",[r("UsersTable",{staticStyle:{height:"calc(100vh - 50px)"},attrs:{users:e.users},scopedSlots:e._u([{key:"top-right",fn:function(){return[r("MShowTutorialVideoButton",{staticClass:"q-mr-sm",attrs:{title:"Managing Users"}})]},proxy:!0}])})],1)},a=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-table",e._g(e._b({attrs:{data:e.usersFiltered,columns:e.columns,pagination:e.initialPagination},scopedSlots:e._u([{key:"top",fn:function(){return[r("div",{staticClass:"text-h4 text-grey-8"},[e._v("\n      Users\n    ")]),r("CreateUserButton",{staticClass:"q-ml-md",attrs:{round:"",icon:"mdi-plus",size:"sm"}}),r("q-input",{staticClass:"q-ml-lg",attrs:{dense:"",placeholder:"Search",outlined:"",autofocus:"",clearable:"",debounce:150},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("q-space"),e._t("top-right")]},proxy:!0},{key:"body-cell-edit",fn:function(t){return[r("td",{staticClass:"text-center"},[e.canManageUser(t.row)?r("UpdateUserButton",{attrs:{flat:"",icon:"mdi-pencil",round:"",dense:"",color:"blue-4",user:t.row}}):e._e()],1)]}},{key:"body-cell-delete",fn:function(t){return[r("td",{staticClass:"text-center"},[e.canManageUser(t.row)?r("RDeleteButton",{attrs:{model:t.row,"model-name":"User",flat:"",icon:"mdi-delete",round:"",dense:"",color:"red-4"}}):e._e()],1)]}}],null,!0)},"q-table",e.$attrs,!1),e.$listeners))},l=[],o=r("5bc0"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("BDialogButton",e._g(e._b({ref:"dialogButton"},"BDialogButton",e.$attrs,!1),e.$listeners),[r("q-card-section",[r("CreateUserForm",{on:{success:function(){return e.$refs.dialogButton.hide()}}})],1)],1)},c=[],u=r("7c1e"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("q-input",{staticClass:"q-mb-md",attrs:{filled:"",label:"Name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("q-input",{staticClass:"q-mb-md",attrs:{filled:"",label:"Email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),r("SelectUserRole",{staticClass:"q-mb-md",attrs:{filled:"",label:"Role"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}}),r("q-input",{staticClass:"q-mb-md",attrs:{filled:"",type:e.passwordVisible?"text":"password",label:"Password"},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.passwordVisible?"mdi-eye":"mdi-eye-off"},on:{click:function(t){e.passwordVisible=!e.passwordVisible}}})]},proxy:!0},{key:"after",fn:function(){return[r("q-btn",{attrs:{icon:"mdi-refresh",flat:"",round:""},on:{click:e.generateRandomPassword}})]},proxy:!0}]),model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),r("br"),r("q-btn",{attrs:{label:"Create",color:"primary"},on:{click:e.handleSubmit}})],1)},d=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-select",e._g(e._b({attrs:{options:e.options}},"q-select",e.$attrs,!1),e.$listeners))},f=[],h={props:{},components:{},computed:{options(){const e=["candidate","ibo"];return"super admin"===this.$MUser.getSessionUser().role&&e.push("admin","super admin"),e}},methods:{},data(){return{}}},b=h,g=r("a6c2"),$=r("f636"),U=r("63c1"),q=r.n(U),w=Object(g["a"])(b,p,f,!1,null,null,null),v=w.exports;q()(w,"components",{QSelect:$["a"]});var _={props:{},components:{SelectUserRole:v},computed:{},methods:{generateRandomPassword(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=10;this.form.password=Array(t).fill(e).map((function(e){return e[Math.floor(Math.random()*e.length)]})).join("")},handleSubmit(){this.$MUser.$create(this.form).then(this.handleSuccess).catch(this.handleError)},handleSuccess(e){this.$emit("input",!1),this.$emit("success",e)},handleError(e){console.log(e)}},data(){return{passwordVisible:!1,form:{name:null,email:null,role:null,password:null}}}},y=_,S=r("a3be"),x=r("19dc"),B=r("ef9c"),C=Object(g["a"])(y,m,d,!1,null,null,null),k=C.exports;q()(C,"components",{QInput:S["a"],QIcon:x["a"],QBtn:B["a"]});var E={props:{},components:{BDialogButton:u["b"],CreateUserForm:k},computed:{},methods:{},data(){return{}}},M=E,j=r("7006"),Q=Object(g["a"])(M,i,c,!1,null,null,null),R=Q.exports;q()(Q,"components",{QCardSection:j["a"]});var O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("BDialogButton",e._g(e._b({ref:"dialogButton"},"BDialogButton",e.$attrs,!1),e.$listeners),[r("q-card-section",[r("UpdateUserForm",{attrs:{user:e.user},on:{success:function(t){return e.$refs.dialogButton.hide()}}})],1)],1)},P=[],D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("q-input",{staticClass:"q-mb-md",attrs:{filled:"",label:"Name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("q-input",{staticClass:"q-mb-md",attrs:{filled:"",label:"Email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),r("SelectUserRole",{staticClass:"q-mb-md",attrs:{filled:"",label:"Role"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}}),r("br"),r("q-btn",{attrs:{label:"Update",color:"primary"},on:{click:e.handleSubmit}})],1)},F=[],V={props:{user:{required:!0,type:Object}},components:{SelectUserRole:v},computed:{},methods:{generateRandomPassword(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=10;this.form.password=Array(t).fill(e).map((function(e){return e[Math.floor(Math.random()*e.length)]})).join("")},handleSubmit(){this.user.$update(this.form).then(this.handleSuccess).catch(this.handleError)},handleSuccess(e){this.$emit("input",!1),this.$emit("success",e)},handleError(e){console.log(e)}},created(){Object.keys(this.form).forEach((e=>{this.user[e]&&(this.form[e]=this.user[e])}))},data(){return{form:{name:null,email:null,role:null}}}},I=V,T=Object(g["a"])(I,D,F,!1,null,null,null),A=T.exports;q()(T,"components",{QInput:S["a"],QBtn:B["a"]});var N={props:{user:{required:!0,type:Object}},components:{BDialogButton:u["b"],UpdateUserForm:A},computed:{},methods:{},data(){return{}}},J=N,L=Object(g["a"])(J,O,P,!1,null,null,null),z=L.exports;q()(L,"components",{QCardSection:j["a"]});var G={props:{users:{required:!0,type:Array}},components:{RDeleteButton:o["b"],CreateUserButton:R,UpdateUserButton:z},computed:{usersFiltered(){return this.search?this.users.filter((e=>String(e.name).toLowerCase().includes(String(this.search).toLowerCase()))):this.users},columns(){return[{align:"left",field:"name",label:"Name",name:"name"},{align:"left",field:"email",label:"Email",name:"email"},{align:"left",field:"role",label:"Role",name:"role"},{align:"center",field:"edit",label:"Edit",name:"edit"},{align:"center",field:"delete",label:"Delete",name:"delete"}]}},methods:{canManageUser(e){const t=this.$MUser.getSessionUser();return"super admin"===t.role||"admin"!==e.role}},data(){return{initialPagination:{descending:!1,rowsPerPage:20},search:""}}},H=G,K=r("3846"),W=r("dc01"),X=Object(g["a"])(H,n,l,!1,null,null,null),Y=X.exports;q()(X,"components",{QTable:K["a"],QInput:S["a"],QSpace:W["a"]});var Z={name:"UsersPage",components:{UsersTable:Y},data(){return{}},created(){this.$MUser.$get()},computed:{users(){return this.$MUser.all()}}},ee=Z,te=r("505d"),re=Object(g["a"])(ee,s,a,!1,null,null,null);t["default"]=re.exports;q()(re,"components",{QPage:te["a"]})}}]);